//Click the size Options on optin change

if(window.location.href.includes('product')){
    setTimeout(function name(params) {
        document.querySelector('#customSelect').addEventListener('change',(e)=>{
            document.querySelector('input[value="'+ e.target.value + '"]').click()
        });
    },1000);

window.addEventListener("DOMContentLoaded", (event) => {
document.querySelector('.product-form__submit').addEventListener('click',(e)=>{
    let varientIdSelected = document.querySelector('.product-variant-id').value;
   
    if(varientIdSelected == '46899165921582'){
        setTimeout(function(){  
        addToCartByVariantId();
    },500); 
    }
});
}); 
function addToCartByVariantId() {
    const data={
        items:[
            {
            id:46871455793454,
            quantity:1
            }
        ]
    } 
    fetch('/cart/add.js',{
        method:'POST',
        headers:{
            'Content-Type':'application/json',
            'X-Requested-With':'XMLHttpRequest'
        },
        body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(data=>{
        if(data.status == 'success'){
            console.log('Product Added to cart');
        }else{
            console.log('Error Adding Product');
        }
    })
    .catch(error =>{
        console.log('Error',error)
    });
}
// remove variant on reload select default
document.addEventListener('DOMContentLoaded', function() {
    let currentUrl = window.location.href;
    currentUrl = removeQueryParam(currentUrl, 'variant');
    history.replaceState({}, document.title, currentUrl);
  });
  function removeQueryParam(url, param) {
    const urlParts = url.split('?');
    if (urlParts.length >= 2) {
      const prefix = encodeURIComponent(param) + '=';
      const queryParams = urlParts[1].split(/[&;]/g);
  
      for (let i = queryParams.length - 1; i >= 0; i--) {
        if (queryParams[i].lastIndexOf(prefix, 0) === 0) {
          queryParams.splice(i, 1);
        }
      }
      return urlParts[0] + (queryParams.length > 0 ? '?' + queryParams.join('&') : '');
    }
    return url;
  }
}

